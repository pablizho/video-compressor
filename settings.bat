@echo off
REM ============================================
REM  НАСТРОЙКИ СЖАТИЯ ВИДЕО
REM ============================================

REM Путь к папке с исходными видео
set "INPUT_DIR=%~dp0input"

REM Путь к папке для сжатых видео
set "OUTPUT_DIR=%~dp0output"

REM ============================================
REM  КАЧЕСТВО (CRF) — чем ниже, тем лучше качество
REM  Рекомендации:
REM    18 = визуально без потерь (большой файл)
REM    20 = отличное качество (рекомендуется)
REM    23 = хорошее качество (по умолчанию FFmpeg)
REM    26 = среднее качество
REM    28 = заметные артефакты
REM ============================================
set "CRF=20"

REM ============================================
REM  ПРЕСЕТ СКОРОСТИ кодирования
REM  ultrafast, superfast, veryfast, faster, fast,
REM  medium, slow, slower, veryslow, placebo
REM  
REM  Чем медленнее — тем лучше сжатие при том же качестве
REM ============================================
set "PRESET=slow"

REM ============================================
REM  КОДЕК
REM  libx265 = HEVC (лучшее сжатие, новый)
REM  libx264 = H.264 (совместимость, старый)
REM  libsvtav1 = AV1 (лучшее сжатие, очень новый)
REM ============================================
set "CODEC=libx265"

REM ============================================
REM  АУДИО БИТРЕЙТ
REM  128k = хорошее качество
REM  192k = высокое качество
REM  256k = отличное качество
REM  copy = без перекодирования аудио
REM ============================================
set "AUDIO_BITRATE=192k"

REM Аудио кодек (aac, libopus, copy)
set "AUDIO_CODEC=aac"

REM ============================================
REM  КОЛИЧЕСТВО ПОТОКОВ (0 = авто)
REM ============================================
set "THREADS=0"

REM Расширения для поиска видео
set "EXTENSIONS=*.mp4 *.avi *.mkv *.mov *.wmv *.flv *.webm *.m4v *.ts *.mts *.m2ts *.mpg *.mpeg *.3gp *.vob"

REM Суффикс для выходных файлов (пусто = то же имя)
set "SUFFIX="

REM Формат контейнера выходного файла
set "OUTPUT_EXT=mp4"

REM Удалять ли метаданные (yes/no)
set "STRIP_METADATA=no"

REM Логирование (yes/no)
set "LOGGING=yes"